(self.webpackChunkweatherappx=self.webpackChunkweatherappx||[]).push([[296],{341:function(e,t,i){"use strict";i(647);const n={autoClose:!0,keyboard:!0};class s{constructor(e){this._element=e,this._config=s.Default,this._parent=this._element.closest(".dropdown"),this._menu=this._parent.querySelector(".dropdown-menu"),this._addEventListeners()}static get Default(){return n}toggle(){return this._isShown()?this.hide():this.show()}show(){this._isShown()||(this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.style.display="block",this._menu.classList.add("show"),this._element.classList.add("show"))}hide(){if(!this._isShown())return;const e={relatedTarget:this._element};this._hideDropdown(e)}_isShown(){return this._menu.classList.contains("show")}_addEventListeners(){this._element.addEventListener("keydown",(e=>{"Escape"===e.key&&this._config.keyboard&&this.hide()}))}_hideDropdown(e){this._element.blur(),this._element.setAttribute("aria-expanded",!1),this._menu.classList.remove("show"),this._menu.classList.add("hiding"),this._menu.addEventListener("animationend",(()=>{this._menu.classList.remove("hiding"),this._menu.style.display="none"}),{once:!0})}static clearMenus(e){2===e.button||"keyup"===e.type&&"tab"!==e.key||document.querySelectorAll('[data-jsx-toggle="dropdown"].show').forEach((t=>{const i=new s(t);if(!i||!1===i._config.autoClose)return;const n=e.composedPath(),a=n.includes(i._menu);if(n.includes(i._element)||!a||"inside"===i._config.autoClose&&!a||"outside"===i._config.autoClose&&!a)return;if(i._menu.contains(e.target)&&("keyup"===e.type&&"tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))return;const r={relatedTarget:i.element};"click"===e.type&&(r.clickEvent=e),i._hideDropdown(r)}))}}document.addEventListener("click",s.clearMenus);const a=e=>{const t=e.target.closest('[data-jsx-toggle="dropdown"]');e.preventDefault(),new s(t).toggle()};document.querySelectorAll('[data-jsx-toggle="dropdown"]').forEach((e=>{e.addEventListener("click",a)}));const r="https://api.open-meteo.com/v1/forecast?",o="https://geocoding-api.open-meteo.com/v1/",d="https://air-quality-api.open-meteo.com/v1/air-quality?",c=new Map,l=new Map,m=new Map,u=new Map,_={searchCityItems:[],bookmarkCityItems:[],activeCityItem:{},bookmarkedCityItem:{},currentForecast:{},hourlyForecast:{},dailyForecast:{},aqi:{}},h="click",p="DOMContentLoaded",y=document.querySelector("#search"),g=document.querySelector(".search"),v=document.querySelector(".search__input"),w=document.querySelector(".search-results__help"),b=document.querySelector(".search-btn__clear"),f=document.querySelector(".error__text"),x=document.querySelector(".spinner--search"),k=document.querySelector(".city-list--search"),L=document.querySelector(".city-list--bookmark"),$=(document.querySelector(".bookmarks"),document.querySelector(".second-heading--bookmarks"),document.querySelector(".weather-details__content")),E=document.querySelector(".spinner--weather-details"),S=async e=>{const t=await fetch(e),i=await t.json();if(!t.ok)throw new Error(i.description);return i},C=e=>e.offsetHeight,I=e=>{const t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstElementChild},q=(e,t)=>new Intl.DateTimeFormat(void 0,e).format(t),A={className:"modal-backdrop",isAnimated:!1,isVisible:!0};class M{constructor(e){this._config=Object.assign(M.Default,e)}static get Default(){return A}show(e){this._config.isVisible&&!this._isAppended()&&(this._element=this._appendElement(),this._config.isAnimated&&C(this._element),this._element.classList.add("show"),e())}hide(e){this._config.isVisible&&this._isAppended()&&(this._element=this._getElement(),this._element.classList.remove("show"),this._element.addEventListener("transitionend",(()=>{this.dispose(),e()}),{once:!0}))}dispose(){this._isAppended()&&this._element.remove()}_isAppended(){return document.body.contains(this._getElement())}_getElement(){return document.querySelector(`.${this._config.className}`)}_appendElement(){const e=I(`<div class="${this._config.className}"></div>`);return this._config.isAnimated&&e.classList.add("fade"),document.body.insertAdjacentElement("beforeend",e)}}class j{constructor(e){this._element=e,this._backdrop=this._initBackdrop(),this._addEventListeners()}static get NAME(){return"modal"}toggle(){return this._isShown()?this.hide():this.show()}show(){this._isShown()||(document.body.classList.add("modal-open"),document.body.classList.remove("modal-closed"),this._backdrop.show((()=>this._showElement())))}hide(){this._isShown()&&(this._element.classList.remove("show"),this._element.blur(),this._hideModal())}dispose(){this._backdrop.dispose(),super.dispose()}_isShown(){return this._element.classList.contains("show")}_showElement(){this._element.style.display="block",this._element.removeAttribute("aria-hidden"),C(this._element),this._element.classList.add("show"),this._element.focus()}_hideModal(){this._element.addEventListener("transitionend",(()=>{this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._backdrop.hide((()=>{document.body.classList.remove("modal-open"),document.body.classList.add("modal-closed")}))}),{once:!0})}_initBackdrop(){return new M({isVisible:!0,isAnimated:!0})}_addEventListeners(){this._element.addEventListener("keydown",(e=>{"Escape"===e.key&&this.hide()}))}}const H=e=>{const t=e.target.closest('[data-jsx-toggle="modal"]'),i=document.querySelector(t.dataset.jsxTarget);e.preventDefault(),new j(i).toggle()};document.querySelectorAll('[data-jsx-toggle="modal"]').forEach((e=>{e.addEventListener("click",H)})),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hide";const{NAME:i}=e,n=`[data-jsx-dismiss="${i}"]`;document.querySelectorAll(n).forEach((s=>{s.addEventListener("click",(s=>{const a=s.target.closest(n);s.preventDefault(),new e(a.closest(`.${i}`))[t]()}))}))}(j);var T=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Something went wrong";f.textContent=e},z=e=>{("search"===e?x:E).classList.toggle("visually-hidden")},D=(e,t,i)=>Array.from({length:(t-e)/i+1},((t,n)=>e+n*i)),F=(e,t,i)=>{t.forEach((t=>{e.set(t,i)}))},P=e=>{e?(F(c,[0,1],"sunny"),F(c,[2],"partlySunny"),F(c,[51,53,55,56,57],"drizzle"),F(l,[0,1],"Clear / Mostly clear"),F(l,[2],"Partly cloudy"),F(l,[51,53,55,56,57],"Drizzle / Freezing drizzle")):(F(c,[0,1],"clearNight"),F(c,[2],"partlyCloudyNight"),F(c,[51,53,55,56,57],"nightDrizzle"),F(l,[0,1],"Clear / Mostly Clear (night)"),F(l,[2],"Partly cloudy (night)"),F(l,[51,53,55,56,57],"Drizzle (night)")),F(c,[3],"cloudy"),F(c,[45,48],"fog"),F(c,[61,63,80,81],"rain"),F(c,[65,82],"heavyRain"),F(c,[66,67],"Sleet"),F(c,[71,73,77,85],"snow"),F(c,[75,86],"scatteredSnow"),F(c,[95,96,99],"thunderBolt"),F(l,[3],"Cloudy"),F(l,[45,48],"Fog"),F(l,[61,63,80,81],"Rain"),F(l,[65,82],"Heavy rain"),F(l,[66,67],"Freezing rain / Sleet / Wintry mix"),F(l,[71,73,77,85],"Snow"),F(l,[75,86],"Heavy snow / Blizzard"),F(l,[95,96,99],"Thunderstorm"),F(c,[150],"sunrise"),F(c,[151],"sunset")};const{O3:B,PM2_5:N,PM2_10:O,CO:R}={O3:{concBPLow:[0,.055,.071,.086,.106],concBPHigh:[.054,.07,.085,.105,.2],aqiBPLow:[0,51,101,151,201],aqiBPHigh:[50,100,150,200,300]},PM2_5:{concBPLow:[0,12.1,35.5,55.5,150.5,250.5],concBPHigh:[12,35.4,55.4,150.4,250.4,500.4],aqiBPLow:[0,51,101,151,201,301,401],aqiBPHigh:[50,100,150,200,300,400,500]},PM2_10:{concBPLow:[0,55,155,255,355,425],concBPHigh:[54,154,254,354,424,604],aqiBPLow:[0,51,101,151,201,301,401],aqiBPHigh:[50,100,150,200,300,400,500]},CO:{concBPLow:[0,4.5,9.5,12.5,15.5,30.5],concBPHigh:[4.4,9.4,12.4,15.4,40.4,50.4],aqiBPLow:[0,51,101,151,201,301,401],aqiBPHigh:[50,100,150,200,300,400,500]}},U=new Map;U.set("o3",B),U.set("pm2.5",N),U.set("pm2.10",O),U.set("co",R);var V=(e,t)=>{const{concBPLow:i,concBPHigh:n,aqiBPLow:s,aqiBPHigh:a}=U.get(e),r=i.map(((e,i)=>{const r=n[i],o=s[i],d=a[i];return t>=e&&t<=r?(d-o)/(r-e)*(t-e)+o:-1})).filter((e=>-1!==e));return Math.round(Number(r))};const X=e=>{P(e.isDay),F(m,[0,1,2],"Low"),F(m,[3,4,5],"Moderate"),F(m,[6,7],"High"),F(m,[8,9,10],"Very high"),F(m,[11],"Extreme");const t=`\n    <section class="current-forecast">\n      <div class="current-forecast__left">\n        <div class="condition">\n          <div class="condition__header">\n            <h2 class="second-heading">CURRENT WEATHER</h2>\n\n            <div class="condition__header-extras">\n              <i class="bi bi-bookmark-fill condition__header-icon ${_.bookmarkCityItems.some((t=>t.id===e.id))?"bookmarks-btn__icon--bookmarked ":""}"></i>\n              <hr class="vr border-0" />\n              <button type="button" class="btn condition__header-btn" data-jsx-btn-action="reload">\n                <i class="bi bi-arrow-clockwise"></i>\n              </button>\n            </div>\n          </div>\n          <div class="condition-temp">\n            <div class="condition-temp__top">\n              <img src="https://raw.githubusercontent.com/JcSilverX/icons-jsx/main/weather/${c.get(e.weatherCode)}.png" alt="" class="condition-temp__img">\n                <span class="condition-temp__val">${e.temperature}&deg;F</span>\n            </div>\n\n            <h3 class="third-heading">${l.get(e.weatherCode)}</h3>\n\n            <div class="condition-temp__other">\n              <p class="condition-temp__text">Feels like ${e.feelsLike}&deg;</p>\n              <hr class="vr" />\n              <p class="condition-temp__text">Updated at ${q({hour:"numeric",minute:"numeric",timezone:e.timezone},e.time)}</p>\n            </div>\n          </div>\n          \n          <hr class="my-3" />\n          \n          <div class="condition__extras">\n            <p class="condition__text">\n              <i class="bi bi-calendar"></i>\n              ${q({weekday:"long",month:"long",day:"numeric"},e.time)}\n            </p>\n            <p class="condition__text">\n              <i class="bi bi-pin-map-fill"></i>\n              ${e.city}, ${e.st}, ${e.countryCode}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <div class="current-forecast__middle">\n        <div class="details">\n          <div class="details__left">\n            <h2 class="second-heading">TODAY'S DETAILS</h2>\n\n            <div class="aqi">\n              <p class="aqi__text">AIR QUALITY</p>\n              <p class="aqi__text ms-auto">\n                <span class="aqi__dot aqi__dot--${u.get(e.aqi.o3).replace(/ /g,"-").toLowerCase()}">&#8226;</span>\n                ${e.aqi.o3}\n                <span class="text-secondary">${u.get(e.aqi.o3)}</span>\n              </p>\n            </div>\n            \n            <div class="details-list">\n              <div class="details-list__item">\n                <i class="bi bi-thermometer-half fs-16 p-2 rounded details-list__item-icon"></i>\n\n                <div class="">\n                  <p class="info__text text-secondary">HIGH/LOW</p>\n                  <p class="info__text">${e.maxTemp}&deg; | ${e.minFeelsLikeTemp}&deg;</p>\n                </div>\n              </div>\n              <div class="details-list__item">\n                <i class="bi bi-umbrella fs-16 p-2 rounded details-list__item-icon"></i>\n\n                <div class="">\n                  <p class="info__text text-secondary">PRECIPITATION</p>\n                  <p class="info__text">${e.precipitation} in</p>\n                </div>  \n              </div>\n              <div class="details-list__item">\n                <i class="bi bi-sunglasses fs-16 p-2 rounded details-list__item-icon"></i>\n\n                <div class="">\n                  <p class="info__text text-secondary">MAX UV INDEX</p>\n                  <p class="info__text">${e.uvIndex} ${m.get(e.uvIndex)}</p>\n                </div>\n              </div>\n              <div class="details-list__item">\n                <i class="bi bi-eye fs-16 p-2 rounded details-list__item-icon"></i>\n\n                <div class="">\n                  <p class="info__text text-secondary">VISIBILITY</p>\n                  <p class="info__text">${e.visibility} mi</p>\n                </div>\n              </div>\n              <div class="details-list__item">\n                <i class="bi bi-wind fs-16 p-2 rounded details-list__item-icon"></i>\n\n                <div class="">\n                  <p class="info__text text-secondary">WIND</p>\n                  <p class="info__text">${e.windSpeed} mph</p>\n                </div>\n              </div>\n              <div class="details-list__item">\n                <i class="fs-12 p-2 rounded details-list__item-icon">DP</i>\n\n                <div class="">\n                  <p class="info__text text-secondary">DEW POINT</p>\n                  <p class="info__text">${e.dewPoint}&deg;</p>\n                </div>\n              </div>\n              <div class="details-list__item">\n                <i class="bi bi-speedometer fs-16 p-2 rounded details-list__item-icon"></i>\n                <div class="">\n                  <p class="info__text text-secondary">PRESSURE</p>\n                  <p class="info__text">${e.pressure} in</p>\n                </div>\n              </div>\n              <div class="details-list__item">\n                <i class="bi bi-moisture fs-16 p-2 rounded details-list__item-icon"></i>\n                <div class="">\n                  <p class="info__text text-secondary">HUMIDITY</p>\n                  <p class="info__text">${e.humidity}%</p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class="details__right mx-auto">\n            <h2 class="second-heading text-center">DAYLIGHT HOURS</h2>\n              \n            <wx-gauge class="gauge mx-auto" data-jsx-percent="${((e,t)=>{const[i,n]=e.split(":").map((e=>Number(e))),[s,a]=t.split(":").map((e=>Number(e)));return Number((60*i+n)/1e3/((60*s+a)/1e3))})(q({timeStyle:"short",hour12:!1},e.time),q({timeStyle:"short",hour12:!1},e.sunset))}"></wx-gauge>\n\n            <div class="daylight-hrs">\n              <div class="daylight-hrs__left">\n                <img src="https://github.com/JcSilverX/icons-jsx/blob/main/weather/sunrise.png?raw=true" alt="Sunrise" class="daylight-hrs__img">\n                <p class="daylight-hrs__text">Sunrise</p>\n                <p class="daylight-hrs__text">${q({timeStyle:"short",timeZone:e.timezone},e.sunrise)}</p>\n              </div>\n              <div class="daylight-hrs__middle">\n                <p class="daylight-hrs__text">${((e,t)=>{const[i,n]=e.split(":").map((e=>Number(e))),[s,a]=t.split(":").map((e=>Number(e)));return n<a?`${s-i}hr ${a-n}mins`:n>a?`${s-1-i}hr ${a+60-n}mins`:0})(q({timeStyle:"short",timeZone:e.timezone,hour12:!1},e.sunrise),q({timeStyle:"short",timeZone:e.timezone,hour12:!1},e.sunset))}</p>\n              </div>\n              <div class="daylight-hrs__right">\n                <img src="https://github.com/JcSilverX/icons-jsx/blob/main/weather/sunset.png?raw=true" alt="Sunset" class="daylight-hrs__img">\n                <p class="daylight-hrs__text">Sunset</p>\n                <p class="daylight-hrs__text">${q({timeStyle:"short",timeZone:e.timezone},e.sunset)}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="current-forecast__right">\n        <div id="map"></div>\n      </div>\n    </section>\n  `;$.innerHTML=t};var J=()=>{const e=(()=>{F(u,D(0,50,1),"Good"),F(u,D(51,100,1),"Moderate"),F(u,D(101,200,1),"Unhealthy"),F(u,D(201,300,1),"Very unhealthy"),F(u,D(301,500,1),"Hazardous");const{weather_code:e,temperature_2m:t,apparent_temperature:i,wind_speed_10m:n,precipitation:s,relative_humidity_2m:a,pressure_msl:r,is_day:o}=_.currentForecast,{visibility:[d],dew_point_2m:[c]}=_.hourlyForecast,{temperature_2m_max:[l],apparent_temperature_min:[m],sunrise:[h],sunset:[p]}=_.dailyForecast,{pm2_5:y,carbon_monoxide:g,nitrogen_dioxide:v,sulphur_dioxide:w,ozone:b,uv_index:f}=_.aqi,{id:x,name:k,admin1:L,country_code:$,timezone:E}=_.activeCityItem;return{time:(new Date).getTime(),weatherCode:e,temperature:Math.round(t),feelsLike:Math.round(i),windSpeed:n,precipitation:Math.round(s),humidity:a,pressure:(.02952998057228486*r).toFixed(2),isDay:o,visibility:(d/5280).toFixed(1),dewPoint:c,maxTemp:Math.round(l),minFeelsLikeTemp:Math.round(m),sunrise:1e3*h,sunset:1e3*p,id:x,city:k,st:L,countryCode:$,timezone:E,aqi:{pm25:V("pm2.5",y),co:g,no:v,so:w,o3:V("o3",parseFloat((S=b,48,24.45*S/48/1e3).toFixed(3)))},uvIndex:Math.round(f)};var S})();X(e),(async()=>{const{Map:e}=await google.maps.importLibrary("maps"),{AdvancedMarkerElement:t}=await google.maps.importLibrary("marker");new t({map:new e(document.getElementById("map"),{center:{lat:_.activeCityItem.latitude,lng:_.activeCityItem.longitude},zoom:8,mapId:""}),position:{lat:_.activeCityItem.latitude,lng:_.activeCityItem.longitude}})})(),(e=>{const t=I('<section class="hourly-forecast"></section>'),i=I('<h2 class="second-heading">HOURLY FORECAST</h2>'),n=I('<div class="hourly-forecast__content"></div>');$.insertAdjacentElement("beforeend",t),t.insertAdjacentElement("beforeend",i),t.insertAdjacentElement("beforeend",n),e.slice(0,25).forEach((e=>{P(e.isDay);const t=`\n      <div class="card">\n        <div class="card__header">\n          ${q({timeStyle:"short",timeZone:e.timezone},e.timestamp)}\n        </div>\n        <div class="card__body">\n          <img src="https://raw.githubusercontent.com/JcSilverX/icons-jsx/main/weather/${c.get(e.weatherCode)}.png" alt="" width="20" height="20" />\n        </div>\n        <div class="card__footer">\n          ${150===e.temperature||151===e.temperature?(i=c.get(e.weatherCode),i.charAt(0).toUpperCase()+i.slice(1)):`${e.temperature}&deg;`}\n        </div>\n      </div>\n    `;var i;n.insertAdjacentHTML("beforeend",t)}))})((()=>{const{time:e,temperature_2m:t,weather_code:i,is_day:n}=_.hourlyForecast,{sunrise:s,sunset:a}=_.dailyForecast,r=e.concat(s,a).sort(),o=s.concat(a).sort(),d=r.filter((e=>o.includes(e))),c=r.map(((e,t)=>r.indexOf(d[t]))).filter((e=>-1!==e));return r.map(((e,s)=>(s%2==0?(i.splice(c[s],1,150),t.splice(c[s],1,150)):(i.splice(c[s],1,151),t.splice(c[s],1,151)),{timestamp:1e3*e,weatherCode:i[s],temperature:Math.round(t[s]),isDay:n[s]}))).filter((e=>{let{timestamp:t}=e;return t>=1e3*_.currentForecast.time}))})()),(e=>{const t=I('<section class="daily-forecast"></section>'),i=I('<h2 class="second-heading">DAILY FORECAST</h2>'),n=I('<ul class="daily-forecast__list grid" style="--jsx-rows: 10; --jsx-columns: 5;"></ul>');$.insertAdjacentElement("beforeend",t),t.insertAdjacentElement("beforeend",i),t.insertAdjacentElement("beforeend",n),e.forEach((e=>{P(e.isDay);const t=`\n      <li class="daily-forecast__item">${q({weekday:"long"},e.timestamp)}</li>\n      <li class="daily-forecast__item">\n        <img src="https://raw.githubusercontent.com/JcSilverX/icons-jsx/main/weather/${c.get(e.weatherCode)}.png" alt='' width="20" height="20" />\n      </li>\n      <li class="daily-forecast__item">${e.precipitation>0?`${e.precipitation}in`:""}</li>\n      <li class="daily-forecast__item">${e.maxTemp}&deg;</li>\n      <li class="daily-forecast__item daily-forecast__item--min-temp">${e.minFeelsLikeTemp}&deg;</li>\n    `;n.insertAdjacentHTML("beforeend",t)}))})((()=>{const{time:e,weather_code:t,temperature_2m_max:i,apparent_temperature_min:n,precipitation_sum:s}=_.dailyForecast;return e.map(((e,a)=>({timestamp:1e3*e,weatherCode:t[a],maxTemp:Math.round(i[a]),minFeelsLikeTemp:Math.round(n[a]),precipitation:Math.round(100*s[a])/100,isDay:0===a?_.currentForecast.isDay:1})))})())};window.addEventListener(p,class{constructor(){}static async initApp(){$.innerHTML="",z("weather-details");try{const e=await S(`${o}get?id=5128581&language=en&format=json`),{latitude:t,longitude:i,timezone:n}=e,{current:s,hourly:a,daily:c}=await S(`${r}latitude=${t}&longitude=${i}&current=temperature_2m,relative_humidity_2m,apparent_temperature,is_day,precipitation,rain,showers,snowfall,weather_code,cloud_cover,pressure_msl,wind_speed_10m&hourly=temperature_2m,relative_humidity_2m,dew_point_2m,apparent_temperature,precipitation_probability,precipitation,rain,showers,snowfall,snow_depth,weather_code,pressure_msl,visibility,uv_index,uv_index_clear_sky,is_day&daily=weather_code,temperature_2m_max,temperature_2m_min,apparent_temperature_max,apparent_temperature_min,sunrise,sunset,daylight_duration,sunshine_duration,uv_index_max,uv_index_clear_sky_max,precipitation_sum,rain_sum,showers_sum,snowfall_sum,precipitation_hours,precipitation_probability_max&temperature_unit=fahrenheit&wind_speed_unit=mph&precipitation_unit=inch&timeformat=unixtime&timezone=${n}&forecast_days=10`),{current:l}=await S(`${d}latitude=${t}&longitude=${i}&current=european_aqi,us_aqi,pm10,pm2_5,carbon_monoxide,nitrogen_dioxide,sulphur_dioxide,ozone,uv_index,uv_index_clear_sky&timeformat=unixtime&timezone=${n}&forecast_days=7`);z("weather-details"),_.activeCityItem=e,_.currentForecast=s,_.hourlyForecast=a,_.dailyForecast=c,_.aqi=l,J()}catch(e){T(e.message)}}}.initApp);var Y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"search";const t="search"===e?k:L;let i;t.innerHTML="","search"===e?i=_.searchCityItems:"bookmarks"===e&&(i=_.bookmarkCityItems),i.forEach((e=>{const i=I(`\n      <li id=${e.id} class="city-item ${_.activeCityItem.id===e.id?"city-item--active":""}">\n        <div class="city-item__top">\n          <img src="https://hatscripts.github.io/circle-flags/flags/${e.country_code.toLowerCase()}.svg" alt="${e.country}" title="${e.country}" class="city-item__img">\n          <h3 class="third-heading">${e.name}</h3>\n\n          <button type="button" class="btn bookmarks-btn" data-jsx-btn-action="bookmark" aria-label="Bookmark" title="Bookmark">\n            <i class="bi bi-star-fill bookmarks-btn__icon ${_.bookmarkCityItems.some((t=>t.id===e.id))?"bookmarks-btn__icon--bookmarked ":""}"></i>\n          </button>\n        </div>\n        <div class="city-item__bottom">\n          <p class="city-item__city">${e.admin1?e.admin1:""}</p>\n          <p class="city-item__cords" data-jsx-cords="${e.latitude} ${e.longitude}">(${e.latitude.toFixed(2)}&deg; ${e.longitude.toFixed(2)}&deg;)</p>\n        </div>\n      </li>\n    `);t.insertAdjacentElement("beforeend",i)}))};class Z extends j{constructor(e){super(e)}static keydownHandler(e){const t=new Z(y);e.ctrlKey&&"k"===e.key&&(e.preventDefault(),t.toggle())}static async submitHandler(e){e.preventDefault();const t=v.value,i=/[^A-Za-z0-9\s]+/g.test(t);if(w.classList.add("visually-hidden"),i||0===t.length||1===t.length)return k.innerHTML="",void T("No locations found");v.blur(),T(""),k.innerHTML="",z("search");try{const e=await S(`${o}search?name=${t}&count=10&language=en&format=json`),{results:i}=e;if(void 0===i)return k.innerHTML="",z("search"),void T("No locations found");z("search"),_.searchCityItems=i,L.innerHTML="",Y("search")}catch(e){T(e.message)}}static async clickHandler(e){if(e.preventDefault(),e.target.className.includes("bookmarks"))return;const t=e.target.closest(".city-item");document.querySelectorAll(".city-item.city-item--active").forEach((e=>e.classList.remove("city-item--active"))),t.classList.add("city-item--active"),$.innerHTML="",z("weather-details");const{id:i}=t,n=[..._.searchCityItems,..._.bookmarkCityItems];_.activeCityItem=n.find((e=>e.id===+i)),window.history.pushState(null,"",`/#${i}`),new Z(y).hide();try{const{latitude:e,longitude:t,timezone:n}=await S(`${o}get?id=${i}&language=en&format=json`),{current:s,hourly:a,daily:c}=await S(`${r}latitude=${e}&longitude=${t}&current=temperature_2m,relative_humidity_2m,apparent_temperature,is_day,precipitation,rain,showers,snowfall,weather_code,cloud_cover,pressure_msl,wind_speed_10m&hourly=temperature_2m,relative_humidity_2m,dew_point_2m,apparent_temperature,precipitation_probability,precipitation,rain,showers,snowfall,snow_depth,weather_code,pressure_msl,visibility,uv_index,uv_index_clear_sky,is_day&daily=weather_code,temperature_2m_max,temperature_2m_min,apparent_temperature_max,apparent_temperature_min,sunrise,sunset,daylight_duration,sunshine_duration,uv_index_max,uv_index_clear_sky_max,precipitation_sum,rain_sum,showers_sum,snowfall_sum,precipitation_hours,precipitation_probability_max&temperature_unit=fahrenheit&wind_speed_unit=mph&precipitation_unit=inch&timeformat=unixtime&timezone=${n}&forecast_days=10`),{current:l}=await S(`${d}latitude=${e}&longitude=${t}&current=european_aqi,us_aqi,pm10,pm2_5,carbon_monoxide,nitrogen_dioxide,sulphur_dioxide,ozone,uv_index,uv_index_clear_sky&timeformat=unixtime&timezone=${n}&forecast_days=7`);z("weather-details"),_.currentForecast=s,_.hourlyForecast=a,_.dailyForecast=c,_.aqi=l,J()}catch(e){T(e.message)}}static clearInput(e){e.preventDefault(),v.value="",T("")}}document.addEventListener("keydown",Z.keydownHandler),g.addEventListener("submit",Z.submitHandler),k.addEventListener(h,Z.clickHandler),L.addEventListener(h,Z.clickHandler),b.addEventListener(h,Z.clearInput);class W extends HTMLElement{static css="\n    :host {\n      width: 100%;\n      max-width: 10rem;\n    }\n\n    .gauge__body {\n      position: relative;\n      width: 100%;\n      height: 0;\n      padding-bottom: 50%;\n      background: #b4c0be;\n      border-top-left-radius: 100% 200%;\n      border-top-right-radius: 100% 200%;\n      overflow: hidden;\n    }\n\n    .gauge__fill {\n      position: absolute;\n      top: 100%;\n      left: 0;\n      width: inherit;\n      height: 100%;\n      background: #fad631;\n      transform-origin: center top;\n      transform: rotate(.25turn);\n      transition: transform .2s ease-in-out;\n    }\n\n    .gauge__cover {\n      position: absolute;\n      width: 95%;\n      height: 190%;\n      border-radius: 50%;\n      // background:  var(--jsx-gauge-cover-bg, #dfdfdf);\n      background: var(--jsx-body-bg);\n      top: 5%;\n      left: 50%;\n      transform: translateX(-50%);\n    }\n  ";constructor(){super(),this.attachShadow({mode:"open"});const e=document.createElement("style"),t=I('\n        <div class="gauge__body">\n            <div class="gauge__fill"></div>\n            <div class="gauge__cover"></div>\n        </div>\n    ');e.innerHTML=W.css,this.shadowRoot.append(e,t)}get percent(){const e=this.getAttribute("data-jsx-percent");if(!(e<0))return e>1?1:e}set percent(e){this.setAttribute("data-jsx-percent",e)}static get observedAttributes(){return["data-jsx-percent"]}attributeChangedCallback(e){"data-jsx-percent"===e&&(this.shadowRoot.querySelector(".gauge__fill").style.transform=`rotate(${this.percent/2}turn)`)}}customElements.define("wx-gauge",W);const G=async()=>{const e=window.location.hash.substring(1);if(e){$.innerHTML="",z("weather-details");try{const t=await S(`${o}get?id=${e}&language=en&format=json`),{latitude:i,longitude:n,timezone:s}=t,{current:a,hourly:c,daily:l}=await S(`${r}latitude=${i}&longitude=${n}&current=temperature_2m,relative_humidity_2m,apparent_temperature,is_day,precipitation,rain,showers,snowfall,weather_code,cloud_cover,pressure_msl,wind_speed_10m&hourly=temperature_2m,relative_humidity_2m,dew_point_2m,apparent_temperature,precipitation_probability,precipitation,rain,showers,snowfall,snow_depth,weather_code,pressure_msl,visibility,uv_index,uv_index_clear_sky,is_day&daily=weather_code,temperature_2m_max,temperature_2m_min,apparent_temperature_max,apparent_temperature_min,sunrise,sunset,daylight_duration,sunshine_duration,uv_index_max,uv_index_clear_sky_max,precipitation_sum,rain_sum,showers_sum,snowfall_sum,precipitation_hours,precipitation_probability_max&temperature_unit=fahrenheit&wind_speed_unit=mph&precipitation_unit=inch&timeformat=unixtime&timezone=${s}&forecast_days=10`),{current:m}=await S(`${d}latitude=${i}&longitude=${n}&current=european_aqi,us_aqi,pm10,pm2_5,carbon_monoxide,nitrogen_dioxide,sulphur_dioxide,ozone,uv_index,uv_index_clear_sky&timeformat=unixtime&timezone=${s}&forecast_days=7`);z("weather-details"),_.activeCityItem=t,_.currentForecast=a,_.hourlyForecast=c,_.dailyForecast=l,_.aqi=m,J()}catch(e){T(e.message)}}};window.addEventListener(p,G),window.addEventListener("hashchange",G);class K extends Z{constructor(e){super(e)}static clickHandler(e){const t=e.target;if(!t.className.includes("bookmarks"))return;const i=t.closest(".city-item");i.classList.add("city-item--bookmarked");const n=[..._.searchCityItems,..._.bookmarkCityItems];_.bookmarkedCityItem=n.find((e=>e.id===+i.id)),_.bookmarkCityItems.some((e=>e.id===_.bookmarkedCityItem.id))?_.bookmarkCityItems=_.bookmarkCityItems.filter((e=>e.id!==_.bookmarkedCityItem.id)):_.bookmarkCityItems.push(_.bookmarkedCityItem),localStorage.setItem("bookmarkCityItems",JSON.stringify(_.bookmarkCityItems)),t.classList.toggle("bookmarks-btn__icon--bookmarked"),Y("search")}static documentLoadHandler(){0!==_.bookmarkCityItems.length&&(w.classList.add("visually-hidden"),Y("bookmarks"))}}k.addEventListener(h,K.clickHandler),L.addEventListener(h,K.clickHandler),document.addEventListener(p,K.documentLoadHandler);const Q=localStorage.getItem("bookmarkCityItems");Q&&(_.bookmarkCityItems=JSON.parse(Q));$.addEventListener(h,(e=>{const t=e.target.closest('[data-jsx-btn-action="reload"]');e.preventDefault(),t&&window.location.reload()}))},647:function(){const e=()=>localStorage.getItem("theme"),t=()=>e()||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),i=e=>{"auto"===e?document.documentElement.setAttribute("data-jsx-theme",window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"):document.documentElement.setAttribute("data-jsx-theme",e)};i(t());const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=document.querySelector("#jsx-theme");if(!i)return;const n=document.querySelector(".theme__icon--active use"),s=document.querySelector(`[data-jsx-theme-value="${e}"]`),a=s.querySelector("svg use").getAttribute("href");document.querySelectorAll("[data-jsx-theme-value]").forEach((e=>{e.classList.remove("active"),e.setAttribute("aria-pressed","false")})),s.classList.add("active"),s.setAttribute("aria-pressed","true"),n.setAttribute("href",a),t&&i.focus()};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(()=>{const n=e();"light"!==n&&"dark"!==n&&i(t())}));const s=e=>{const t=e.target.closest("[data-jsx-theme-value]").getAttribute("data-jsx-theme-value");(e=>{localStorage.setItem("theme",e)})(t),i(t),n(t,!0)};window.addEventListener("DOMContentLoaded",(()=>{n(t()),document.querySelectorAll("[data-jsx-theme-value]").forEach((e=>{e.addEventListener("click",s)}))}))}},function(e){e(e.s=341)}]);
//# sourceMappingURL=bundle.d490abb13fd386d40b8a.js.map